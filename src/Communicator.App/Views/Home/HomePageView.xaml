<UserControl x:Class="Communicator.App.Views.Home.HomePageView" x:ClassModifier="public"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:icons="clr-namespace:Communicator.Icons;assembly=Communicator.Icons"
             xmlns:analytics="clr-namespace:Communicator.UX.Analytics.Views;assembly=Communicator.UX.Analytics"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="{DynamicResource AppBackgroundBrush}">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Padding="0,0,0,20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

        <!-- Header Section -->
        <StackPanel Grid.Row="0" Margin="48,32,48,24">
            <!-- Date -->
            <TextBlock Text="{Binding CurrentTime}" 
                       FontSize="16" 
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       FontWeight="Medium"
                       Margin="0,0,0,12"/>
            
            <!-- Welcome Message -->
            <TextBlock FontSize="36" 
                       FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       Margin="0,0,0,8">
                <Run Text="Welcome,"/>
                <Run Text="{Binding WelcomeMessage, Mode=OneWay}"/>
            </TextBlock>
            
            <!-- Subheading / Quote -->
            <TextBlock Text="{Binding SubHeading}" 
                       FontSize="18" 
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       TextWrapping="Wrap"
                       MaxWidth="800"
                       HorizontalAlignment="Left"
                       LineHeight="28"
                       FontStyle="Italic"/>
        </StackPanel>

        <!-- Meeting Controls -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="48,0,48,32">
            <!-- TextBox for Meeting Link -->
            <Grid VerticalAlignment="Center" Margin="0,0,16,0">
                <TextBlock Margin="12,0" 
                           VerticalAlignment="Center"
                           Text="Enter Meeting Link" 
                           FontSize="16"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           Visibility="{Binding ElementName=MeetingLinkTextBox, Path=Text.IsEmpty, Converter={StaticResource BooleanToVisibilityConverter}}" 
                           IsHitTestVisible="False"/>
                <TextBox x:Name="MeetingLinkTextBox"
                         AutomationProperties.AutomationId="MeetingLinkInput"
                         Text="{Binding MeetingLink, UpdateSourceTrigger=PropertyChanged}" 
                         Width="300" 
                         Height="48"
                         Padding="10,0"
                         VerticalContentAlignment="Center"
                         Background="{DynamicResource SurfaceBrush}"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         BorderBrush="{DynamicResource BorderBrush}"
                         BorderThickness="1">
                    <TextBox.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="8"/>
                        </Style>
                    </TextBox.Resources>
                </TextBox>
            </Grid>

            <!-- Join Meeting Button -->
            <Button Command="{Binding JoinMeetingCommand}"
                    AutomationProperties.AutomationId="JoinMeetingButton"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Height="48"
                    Margin="0,0,16,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <icons:Icon IconName="arrow-autofit-right-filled" 
                                IconSize="16" 
                                Foreground="{DynamicResource TextPrimaryBrush}"
                                Margin="0,0,8,0"
                                VerticalAlignment="Center"/>
                    <TextBlock Text="Join Meeting" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

            <!-- Create Meeting Button -->
            <Button Command="{Binding CreateMeetingCommand}"
                    AutomationProperties.AutomationId="CreateMeetingButton"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Height="48">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <icons:Icon IconName="plus" 
                                IconSize="16" 
                                Foreground="{DynamicResource TextOnPrimaryBrush}"
                                Margin="0,0,8,0"
                                VerticalAlignment="Center"/>
                    <TextBlock Text="Create Meeting" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </StackPanel>

        <!-- Main Content Area -->
        <Grid Grid.Row="2" Margin="48,0,48,48">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="32"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Analytics Dashboard (Left) -->
            <analytics:MeetAnalyticsView/>

            <!-- Clock and Calendar (Right) -->
            <StackPanel Grid.Column="2" Width="340">
                <!-- Analog Clock -->
                <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="20" Padding="20" Margin="0,0,0,24">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity="0.05" BlurRadius="20" ShadowDepth="0"/>
                    </Border.Effect>
                    <Viewbox Height="200">
                        <Canvas Width="200" Height="200">
                            <!-- Clock Face -->
                            <Ellipse Width="200" Height="200" Stroke="{DynamicResource PrimaryBrush}" StrokeThickness="4" Fill="{DynamicResource SurfaceBrush}"/>
                            
                            <!-- Hour Marks -->
                            <Rectangle Canvas.Left="99" Canvas.Top="5" Width="2" Height="10" Fill="{DynamicResource TextSecondaryBrush}"/>
                            <Rectangle Canvas.Left="99" Canvas.Top="185" Width="2" Height="10" Fill="{DynamicResource TextSecondaryBrush}"/>
                            <Rectangle Canvas.Left="5" Canvas.Top="99" Width="10" Height="2" Fill="{DynamicResource TextSecondaryBrush}"/>
                            <Rectangle Canvas.Left="185" Canvas.Top="99" Width="10" Height="2" Fill="{DynamicResource TextSecondaryBrush}"/>

                            <!-- Hour Hand -->
                            <Rectangle Width="6" Height="50" Fill="{DynamicResource TextPrimaryBrush}" RadiusX="3" RadiusY="3" Canvas.Left="97" Canvas.Top="50" RenderTransformOrigin="0.5,1">
                                <Rectangle.RenderTransform>
                                    <RotateTransform x:Name="HourHandTransform"/>
                                </Rectangle.RenderTransform>
                            </Rectangle>

                            <!-- Minute Hand -->
                            <Rectangle Width="4" Height="70" Fill="{DynamicResource TextSecondaryBrush}" RadiusX="2" RadiusY="2" Canvas.Left="98" Canvas.Top="30" RenderTransformOrigin="0.5,1">
                                <Rectangle.RenderTransform>
                                    <RotateTransform x:Name="MinuteHandTransform"/>
                                </Rectangle.RenderTransform>
                            </Rectangle>

                            <!-- Second Hand -->
                            <Rectangle Width="2" Height="80" Fill="{DynamicResource ErrorBrush}" Canvas.Left="99" Canvas.Top="20" RenderTransformOrigin="0.5,1">
                                <Rectangle.RenderTransform>
                                    <RotateTransform x:Name="SecondHandTransform"/>
                                </Rectangle.RenderTransform>
                            </Rectangle>

                            <!-- Center Dot -->
                            <Ellipse Width="10" Height="10" Fill="{DynamicResource PrimaryBrush}" Canvas.Left="95" Canvas.Top="95"/>
                        </Canvas>
                    </Viewbox>
                </Border>

                <!-- Calendar -->
                <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="20" Padding="10">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity="0.05" BlurRadius="20" ShadowDepth="0"/>
                    </Border.Effect>
                    <Calendar HorizontalAlignment="Center" 
                              BorderThickness="0" 
                              Background="Transparent"
                              Foreground="{DynamicResource TextPrimaryBrush}">
                        <Calendar.CalendarButtonStyle>
                            <Style TargetType="CalendarButton">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="FontSize" Value="13"/>
                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="CalendarButton">
                                            <Border x:Name="ButtonBorder" 
                                                    Background="{TemplateBinding Background}" 
                                                    CornerRadius="15"
                                                    Width="50" Height="50">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource HoverBackgroundBrush}"/>
                                                    </Trigger>
                                                    <Trigger Property="HasSelectedDays" Value="True">
                                                    <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                                                    <Setter TargetName="ButtonBorder" Property="BorderThickness" Value="1"/>
                                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Calendar.CalendarButtonStyle>
                        <Calendar.CalendarDayButtonStyle>
                            <Style TargetType="CalendarDayButton">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="FontSize" Value="13"/>
                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="CalendarDayButton">
                                            <Border x:Name="DayBorder" 
                                                    Background="{TemplateBinding Background}" 
                                                    CornerRadius="15"
                                                    Width="30" Height="30">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="DayBorder" Property="Background" Value="{DynamicResource HoverBackgroundBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter TargetName="DayBorder" Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                                                    <Setter Property="Foreground" Value="{DynamicResource TextOnPrimaryBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsToday" Value="True">
                                                    <Setter TargetName="DayBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                                                    <Setter TargetName="DayBorder" Property="BorderThickness" Value="1"/>
                                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                                                </Trigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsSelected" Value="True"/>
                                                        <Condition Property="IsToday" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter Property="Foreground" Value="{DynamicResource TextOnPrimaryBrush}"/>
                                                    <Setter TargetName="DayBorder" Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Calendar.CalendarDayButtonStyle>
                        <Calendar.CalendarItemStyle>
                            <Style TargetType="CalendarItem">
                                <Setter Property="Margin" Value="0,10,0,0"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="CalendarItem">
                                            <ControlTemplate.Resources>
                                                <DataTemplate x:Key="{x:Static CalendarItem.DayTitleTemplateResourceKey}">
                                                    <TextBlock Foreground="{DynamicResource TextSecondaryBrush}" 
                                                               FontWeight="SemiBold" 
                                                               FontSize="12" 
                                                               HorizontalAlignment="Center" 
                                                               VerticalAlignment="Center" 
                                                               Margin="0,6,0,6" 
                                                               Text="{Binding}"/>
                                                </DataTemplate>
                                            </ControlTemplate.Resources>
                                            <Grid x:Name="PART_Root">
                                                <Grid.Resources>
                                                    <SolidColorBrush x:Key="DisabledBrush" Color="#A5FFFFFF"/>
                                                </Grid.Resources>
                                                <Border BorderBrush="{TemplateBinding BorderBrush}" 
                                                        BorderThickness="{TemplateBinding BorderThickness}" 
                                                        Background="{TemplateBinding Background}" 
                                                        CornerRadius="1"/>
                                                
                                                <Grid Margin="4">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>

                                                    <!-- Previous Button -->
                                                    <Button x:Name="PART_PreviousButton" 
                                                            Grid.Column="0" 
                                                            Focusable="False" 
                                                            HorizontalAlignment="Left" 
                                                            Height="28" Width="28"
                                                            Background="Transparent"
                                                            BorderThickness="0"
                                                            Visibility="Collapsed">
                                                        <Button.Template>
                                                            <ControlTemplate TargetType="Button">
                                                                <Grid Background="Transparent" Cursor="Hand">
                                                                    <Path Data="M 6,0 L 0,6 L 6,12" 
                                                                          Stroke="{DynamicResource TextPrimaryBrush}" 
                                                                          StrokeThickness="2"
                                                                          HorizontalAlignment="Center" 
                                                                          VerticalAlignment="Center"/>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Button.Template>
                                                    </Button>

                                                    <!-- Header -->
                                                    <Button x:Name="PART_HeaderButton" 
                                                            Grid.Column="1" 
                                                            Focusable="False" 
                                                            FontWeight="Bold" 
                                                            FontSize="14" 
                                                            HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center" 
                                                            Foreground="{DynamicResource TextPrimaryBrush}"
                                                            Background="Transparent"
                                                            BorderThickness="0"/>

                                                    <!-- Next Button -->
                                                    <Button x:Name="PART_NextButton" 
                                                            Grid.Column="2" 
                                                            Focusable="False" 
                                                            HorizontalAlignment="Right" 
                                                            Height="28" Width="28"
                                                            Background="Transparent"
                                                            BorderThickness="0"
                                                            Visibility="Collapsed">
                                                        <Button.Template>
                                                            <ControlTemplate TargetType="Button">
                                                                <Grid Background="Transparent" Cursor="Hand">
                                                                    <Path Data="M 0,0 L 6,6 L 0,12" 
                                                                          Stroke="{DynamicResource TextPrimaryBrush}" 
                                                                          StrokeThickness="2"
                                                                          HorizontalAlignment="Center" 
                                                                          VerticalAlignment="Center"/>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Button.Template>
                                                    </Button>

                                                    <!-- Month View -->
                                                    <Grid x:Name="PART_MonthView" Grid.Row="1" Grid.ColumnSpan="3" Margin="0,10,0,0" Visibility="Visible">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                    </Grid>

                                                    <!-- Year View -->
                                                    <Grid x:Name="PART_YearView" Grid.Row="1" Grid.ColumnSpan="3" Margin="0,10,0,0" Visibility="Hidden">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                    </Grid>
                                                </Grid>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Calendar.CalendarItemStyle>
                    </Calendar>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
    </ScrollViewer>
</UserControl>

